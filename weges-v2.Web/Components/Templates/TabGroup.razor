<div class="tab-group">
    <div class="tab-headers">
        @foreach (var tab in Tabs)
        {
            <button class="@(tab.IsActive ? "active" : "")"
                    @onclick="() => ActivateTab(tab)">
                @tab.Title
            </button>
        }
    </div>
    <div class="tab-content">
        @if (Tabs.Any(t => t.IsActive))
        {
            @Tabs.First(t => t.IsActive).ChildContent
        }
    </div>
</div>

@code {
    private List<Tab> Tabs { get; set; } = new List<Tab>();

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    public void AddTab(Tab tab)
    {
        Tabs.Add(tab);

        if (Tabs.Count == 1)
        {
            ActivateTab(tab); // Activate the first tab by default
        }
    }

    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender && Tabs.Count > 0 && !Tabs.Any(t => t.IsActive))
        {
            ActivateTab(Tabs.First());
        }
    }

    private void ActivateTab(Tab tab)
    {
        foreach (var t in Tabs)
        {
            t.IsActive = false;
        }
        tab.IsActive = true;
    }
}
